/***
/* La Madeleine
/* Custom JavaScript
/*
**/window.lamIE8=!1;$(function(){function k(){var e=C.indexOf("MSIE ");(e>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))&&$("html").addClass("ie")}var e=$("#content"),t=e.find("#main"),n=e.find("#sidebar");$("html").hasClass("ie8")&&(window.lamIE8=!0);var r=$.cookie("LAM-location");if(typeof r!="undefined")var i=$.parseJSON(r),s=!0;var o=$.cookie("LAM-daypart");if(typeof o!="undefined")var u=$.parseJSON(o),a=!0;var f=$("#nav .nav-wrapper"),l=$("#header .icon-menu"),c,h=function(){var e=$(window).height();if(e>830){l.unbind("click");l.find("span").text("More");l.on("mouseover",function(){$("body").addClass("nav-active")});f.on("mouseleave",function(){$("body").removeClass("nav-active")})}else{l.unbind("mouseover");f.unbind("mouseleave");l.unbind("click");l.on("click",function(e){e.stopPropagation();if($("body").hasClass("nav-active")){$("body").removeClass("nav-active");l.find("span").text("More")}else{$("body").toggleClass("nav-active");l.find("span").text("Close")}f.on("click",function(e){e.stopPropagation()});$("html").on("click",function(){$("body").removeClass("nav-active");l.find("span").text("More")})})}};if(f.length)if(Modernizr.touch)l.on("touchend",function(){$("body").toggleClass("nav-active")});else{h();window.addEventListener("resize",h)}if(e.hasClass("breakfast")||e.hasClass("lunch")||e.hasClass("dinner")||e.hasClass("bakery")){e.find(".back-top").on("click touchend",function(e){e.preventDefault();$("html, body").animate({scrollTop:0},1e3)});if(i){e.find(".menu-details").addClass(i.menu_pricing.toLowerCase());e.find(".set-location").html('<div class="location-name">'+i.title+'<div class="change-location">(<a href="/locations">Change</a>)</div></div>')}var p=setInterval(function(){if(n.find(".widget-daypart").length>0){clearInterval(p);n.find("ul.categories li").on("click",function(e){e.preventDefault();var t=$(this).data("cat-name");$("html, body").animate({scrollTop:$("#category-"+t).offset().top},1e3)})}},1e3),d=function(){n.is(":visible")&&!Modernizr.touch&&n.find("#sticky-widgets").sticky({topSpacing:20,className:"menu",getWidthFrom:"#sidebar .sidebar-wrapper"})};d();var v=debounce(function(){n.find("#sticky-widgets").unstick();d()},250);lamIE8||window.addEventListener("resize",v)}a&&e.find("a.daypart-menu").attr("href",u.link.guid);if(s){$("body").addClass("has-location");$(".lam-call a").attr("href","tel:"+i.phone)}else $("body").addClass("no-location");var m=$("#mobile-location"),g=function(){var e=LaMadLocations.getTodayHours(i);str='<div class="icon-phone"><a href="tel:'+i.phone+'"></a></div><a class="location-link" href="/locations"></a><div class="location-text"><p class="title">'+i.title+'</p><p class="hours"><strong>Today\'s Hours:</strong> '+e.open+" - "+e.close+"</p>";m.append(str);m.addClass("loaded")};m.length&&m.is(":visible")&&s&&g();var y=$("#header");y.find(".lam-geolocate").on("click touchstart",function(){LaMadLocations.getLocation();$(this).hide();y.find(".loading").show();locateInt=setInterval(function(){if(LaMadLocations.nearestLocationObj.id){clearInterval(locateInt);y.find(".loading").hide();i=LaMadLocations.nearestLocationObj;y.find(".lam-call a").attr("href","tel:"+i.phone);g()}},100)});var b=$("#carousel");if(b.length>0){var w=b.find(".carousel-controls"),E=b.find(".carousel-paginate");window.mySwipe=new Swipe(document.getElementById("carousel"),{startSlide:0,speed:500,auto:8e3,callback:function(e,t){E.find(".active").removeClass("active");E.find(".dot:nth-child("+(e+1)+")").addClass("active")}});var S=function(){if(window.mySwipe.getNumSlides()>0){b.find(".carousel-item.has-gradient-1").prepend('<div class="carousel-gradient"></div>');clearInterval(x)}},x=setInterval(S,100);S();w.find(".prev").on("click",function(){mySwipe.prev()});w.find(".next").on("click",function(){mySwipe.next()});E.find(".dot").on("click",function(){mySwipe.slide($(this).data("order"))})}var T=function(){n.is(":visible")&&n.find(".fma-promo").length>0&&!Modernizr.touch&&n.find(".fma-promo").sticky({topSpacing:20,className:"promo",getWidthFrom:"#sidebar .sidebar-wrapper"})};T();var N=debounce(function(){n.find(".fma-promo").unstick();T()},250);lamIE8||window.addEventListener("resize",N);var C=window.navigator.userAgent;k();lamIE8&&t.find(".menu-title").length>0&&t.find(".menu-category").last().addClass("last-category");if(C.indexOf("Android")>=0){var L=parseFloat(C.slice(C.indexOf("Android")+8));L+="";L=L.replace(/\./g,"");$("html").addClass("android android"+L)}});