var LaMadLocations={sideMap:null,currentLocationObj:{latitude:null,longitude:null},nearestLocationObj:{latitude:null,longitude:null},$locationCta:$("#location-cta"),$directionsLink:"",$frontWrapper:function(){return this.$locationCta.find(".front-wrapper")},mapStyles:[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#e0d5ab"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#ddc692"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#9fc8b1"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#fff6da"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#e4dbb9"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.fill",stylers:[{color:"#ffa93d"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#f1e6c6"}]},{featureType:"poi.government",elementType:"geometry.fill"}],initializeMap:function(e,t,n){var r=$("#"+n);if(r.length){newLat=parseFloat(e)+.007;newLng=parseFloat(t);myCenter=new google.maps.LatLng(newLat,newLng);var i=new google.maps.StyledMapType(LaMadLocations.mapStyles,{name:"La Madeleine"}),s=new google.maps.LatLng(e,t),o={panControl:!1,scrollwheel:!1,draggable:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,center:myCenter,zoom:12,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},u=new google.maps.Map(document.getElementById(n),o);u.mapTypes.set("map_style",i);u.setMapTypeId("map_style");typeof icon!="undefined"?displayIcon="/wp-content/themes/required-lamadeleine/img/map/blue-dot.png":displayIcon={url:"/wp-content/themes/required-lamadeleine/img/map/custom-pin-drop.png",scaledSize:new google.maps.Size(48,52)};var a=new google.maps.Marker({position:s,map:u,title:"La Madeleine Location",icon:displayIcon});this.sideMap=u;$("#directionsLinkButton").show()}},getTodayHours:function(e){var t=new Array(7);t[0]="sunday";t[1]="monday";t[2]="tuesday";t[3]="wednesday";t[4]="thursday";t[5]="friday";t[6]="saturday";var n=new Date;dayIndex=n.getDay();dayOfWeek=t[dayIndex];ucaseDayofWeek=dayOfWeek.charAt(0).toUpperCase()+dayOfWeek.slice(1);r=!1;if(e.days_closed!=null&&e.days_closed.indexOf(ucaseDayofWeek)>=0)var r="Closed on "+ucaseDayofWeek;var i=dayOfWeek+"_open",s=dayOfWeek+"_close",o={closed_today:r,open:e[i],close:e[s]};return o},setLocation:function(e,t,n){var r="map",i=LaMadLocations.getTodayHours(e);if(e.address_2.length>0)var s=e.address+"<br>"+e.address_2;else var s=e.address;LaMadLocations.nearestLocationObj=e;loadingIndicator='<div class="loading"><div class="floatingCirclesG"><div class="f_circleG frotateG_01"></div><div class="f_circleG frotateG_02"></div><div class="f_circleG frotateG_03"></div><div class="f_circleG frotateG_04"></div><div class="f_circleG frotateG_05"></div><div class="f_circleG frotateG_06"></div><div class="f_circleG frotateG_07"></div><div class="f_circleG frotateG_08"></div></div></div>';i.closed_today==0?$("#location-info").html('<h4 class="location-title">'+e.title+"</h4>"+'<div class="info-wrapper"><div class="address"><strong>Address:</strong><br>'+s+"<br>"+e.city+", "+e.state+" "+e.zip_code+'</div><div class="phone"><strong>Phone:</strong><br>'+e.phone+'</div></div><div class="hours"><strong>Today\'s Hours:</strong> '+i.open+" - "+i.close+"</div>"):$("#location-info").html('<h4 class="location-title">'+e.title+"</h4>"+'<div class="info-wrapper"><div class="address"><strong>Address:</strong><br>'+s+"<br>"+e.city+", "+e.state+" "+e.zip_code+'</div><div class="phone"><strong>Phone:</strong><br>'+e.phone+'</div></div><div class="hours"><strong>Today\'s Hours:</strong> Closed</div>');i.closed_today==0?$("#widget-location-mobile").html('<h4 class="location-title">'+e.title+'</h4><hr class="dashed">'+'<div class="info-wrapper"><div class="address"><strong>Address:</strong><br>'+e.address+" "+e.address_2+"<br>"+e.city+", "+e.state+" "+e.zip_code+'</div><div class="hours"><div><strong>Today\'s Hours:</strong></div> '+i.open+" - "+i.close+'</div><div class="btn-wrapper"><a class="btn get-directions" href="#"><span>Directions</span>'+loadingIndicator+'</a><a class="btn daypart-menu" href="#">Menu</a><a class="btn call" href="tel:'+e.phone+'"><span class="icon icon-phone"></span> Call</a><div class="other-locations"><hr class="dashed"><h2>Other Nearby Locations</h2><div id="location-list-mobile"></div></div>'):$("#widget-location-mobile").html('<h4 class="location-title">'+e.title+'</h4><hr class="dashed">'+'<div class="info-wrapper"><div class="address"><strong>Address:</strong><br>'+e.address+" "+e.address_2+"<br>"+e.city+", "+e.state+" "+e.zip_code+'</div><div class="hours"><div><strong>Today\'s Hours:</strong></div>Closed</div><div class="btn-wrapper"><a class="btn get-directions" href="#"><span>Directions</span>'+loadingIndicator+'</a><a class="btn daypart-menu" href="#">Menu</a><a class="btn call" href="tel:'+e.phone+'"><span class="icon icon-phone"></span> Call</a><div class="other-locations"><hr class="dashed"><h2>Other Nearby Locations</h2><div id="location-list-mobile"></div></div>');(typeof n=="undefined"||n==0)&&LaMadLocations.setLocationCookie(e);typeof t!="undefined"&&LaMadLocations.initializeMap(e.latitude,e.longitude,r);$("body").removeClass("no-location");$("body").addClass("has-location");$("#content").find("a.get-directions").on("click",function(e){e.preventDefault();LaMadLocations.getDirections(this)});$("#content").find(".lam-call a").attr("href","tel:"+e.phone);var o=$.cookie("LAM-daypart");if(typeof o!="undefined")var u=$.parseJSON(o),a=!0;a&&$("#content").find("a.daypart-menu").attr("href",u.link.guid)},setLocationCookie:function(e){this.nearestLocationObj=e;$.cookie("LAM-location",JSON.stringify(e),{expires:10,path:"/"})},setNearbyLocationsStorage:function(e){localStorage.setItem("LAM-nearby",JSON.stringify(e));typeof LaMadLocations.loadNearest!="undefined"&&LaMadLocations.loadNearest()},getLocationCookie:function(){cookieLoc=$.cookie("LAM-location");if(typeof cookieLoc!="undefined"){jsonCookie=$.parseJSON(cookieLoc);LaMadLocations.nearestLocationObj.latitude=jsonCookie.latitude;LaMadLocations.nearestLocationObj.longitude=jsonCookie.longitude;LaMadLocations.setLocation(jsonCookie,!0,!0);LaMadLocations.$locationCta.addClass("map-loaded no-cta")}else LaMadLocations.$locationCta.find(".flipper").addClass("transition")},getLocation:function(e,t){if(e=="linkOut"){$directionsLink=$(t);$directionsLink.addClass("loading-directions");navigator.geolocation.getCurrentPosition(this.geoLinkDir,this.geoErr)}else navigator.geolocation?typeof e!="undefined"?navigator.geolocation.getCurrentPosition(this.geoFoundObjOnly,this.geoErr):navigator.geolocation.getCurrentPosition(this.geoFound,this.geoErr):$("#map").innerHTML="Geolocation is not supported by this browser."},geoErr:function(e){alert("Pardon, we were not able to determine your location.\nPlease feel free to continue browsing.\nMerci");$("body").addClass("location-error")},geoFoundObjOnly:function(e){LaMadLocations.currentLocationObj.latitude=e.coords.latitude;LaMadLocations.currentLocationObj.longitude=e.coords.longitude},geoFound:function(e){LaMadLocations.currentLocationObj.latitude=e.coords.latitude;LaMadLocations.currentLocationObj.longitude=e.coords.longitude;typeof LaMadLocations.setLargLocation!="undefined"&&LaMadLocations.setLargLocation(e.coords.latitude,e.coords.longitude);LaMadLocations.showPosition(e.coords.latitude,e.coords.longitude)},geoLinkDir:function(e){$directionsLink.removeClass("loading-directions");$directionsLink="";LaMadLocations.currentLocationObj.latitude=e.coords.latitude;LaMadLocations.currentLocationObj.longitude=e.coords.longitude;directionsLink="http://www.google.com/maps/?saddr="+LaMadLocations.currentLocationObj.latitude+","+LaMadLocations.currentLocationObj.longitude+"&daddr="+LaMadLocations.nearestLocationObj.latitude+","+LaMadLocations.nearestLocationObj.longitude+"&directionsmode=driving";window.open(directionsLink,"_blank")},geoCodeZip:function(e){var t=new google.maps.Geocoder;t.geocode({address:e},function(e,t){if(t=="OK"){LaMadLocations.currentLocationObj=e[0].geometry.location;LaMadLocations.showPosition(e[0].geometry.location.lat(),e[0].geometry.location.lng());typeof LaMadLocations.setLargLocation!="undefined"&&LaMadLocations.setLargLocation(e[0].geometry.location.lat(),e[0].geometry.location.lng())}})},showPosition:function(e,t){markers=[];$.ajax({url:"/wp_api/v1/locations/?lat="+e+"&lng="+t,success:function(e){var t=[];$.each(e,function(e,n){if(e==0){LaMadLocations.setLocation(n,!0,!1);add_li=!1}var r=new google.maps.LatLng(n.latitude,n.longitude),i=new google.maps.Marker({position:r,map:this.map,title:"Selected Location"});markers.push(i);t[e]=n});t&&LaMadLocations.setNearbyLocationsStorage(t);LaMadLocations.$locationCta.removeClass("map-loading").addClass("map-loaded");return e},error:function(e,t){$("#map").html("No Locations Found")}})},getDirections:function(e){if(LaMadLocations.currentLocationObj.latitude==null)this.getLocation("linkOut",e);else{directionsLink="http://www.google.com/maps/?saddr="+LaMadLocations.currentLocationObj.latitude+","+LaMadLocations.currentLocationObj.longitude+"&daddr="+LaMadLocations.nearestLocationObj.latitude+","+LaMadLocations.nearestLocationObj.longitude+"&directionsmode=driving";window.open(directionsLink)}},changeSideImage:function(e){img="<img src='"+e+"' >";$("#location-image").html(img)},getImage:function(e,t){typeof t=="undefined"&&(t=!1);$.ajax({url:"/wp_api/v1/locations/image/"+e,success:function(e){t==0&&LaMadLocations.changeSideImage(e);return e}})}};